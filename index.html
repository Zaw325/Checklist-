<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Chemical Checklist (Pro Version 2.2)</title>

<style>
    /* Import Google Font 'Inter' */
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap');

    body {
        font-family: 'Inter', sans-serif;
        background-color: #f8f9fa;
        margin: 0;
        padding: 20px;
        color: #333;
    }

    .container {
        max-width: 900px;
        margin: 20px auto;
        background: #ffffff;
        padding: 30px;
        border-radius: 12px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
    }

    /* === NEW: Logo Style === */
    .logo-img {
        display: block;
        max-width: 150px; /* Set your logo's max width */
        margin: 0 auto 15px auto; /* Center the logo */
    }

    h1 {
        text-align: center;
        color: #2a4d69;
        font-weight: 600;
        margin-bottom: 5px;
    }

    #checklist-date {
        text-align: center;
        font-size: 16px;
        color: #6c757d;
        margin-top: 0;
        margin-bottom: 25px;
    }

    table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 25px;
        border-radius: 8px;
        overflow: hidden;
    }

    th, td {
        padding: 14px;
        text-align: left;
        border-bottom: 1px solid #e9ecef;
    }

    th {
        background-color: #4b86b4;
        color: white;
        text-transform: uppercase;
        font-size: 13px;
        letter-spacing: 0.5px;
    }

    tr:last-child td {
        border-bottom: none;
    }
    
    tr:hover {
        background-color: #f1f7ff;
    }

    /* === NEW: Low Stock Row Style === */
    tr.row-out-of-stock {
        background-color: #ffebee; /* Light red background */
    }
    tr.row-out-of-stock:hover {
        background-color: #ffdde0; /* Lighter red on hover */
    }
    /* Make inputs red too when out of stock */
    tr.row-out-of-stock input,
    tr.row-out-of-stock textarea {
        font-weight: 600;
    }


    input, textarea {
        width: 100%;
        border: 1px solid transparent;
        background: transparent;
        font-size: 14px;
        font-family: 'Inter', sans-serif;
        padding: 8px;
        box-sizing: border-box;
        border-radius: 6px;
        transition: border-color 0.3s, background-color 0.3s;
    }

    input:focus, textarea:focus {
        outline: none;
        background-color: #eef6ff;
        border-color: #4b86b4;
    }

    textarea {
        resize: vertical;
        min-height: 40px;
    }
    
    /* Style for *Urgent* (Red) */
    textarea.remark-urgent {
        color: #D93025; 
        font-weight: 600;
    }
    /* Style for #Note# (Yellow/Gold) */
    textarea.remark-note {
        color: #darkgoldenrod; 
        font-weight: 600;
    }


    .btn-area {
        text-align: center;
        margin-top: 25px;
    }

    button {
        background-color: #2a4d69;
        color: white;
        border: none;
        padding: 12px 20px;
        margin: 5px;
        border-radius: 8px;
        cursor: pointer;
        font-size: 14px;
        font-weight: 500;
        transition: background-color 0.3s, transform 0.2s;
    }

    button:hover {
        background-color: #1b3143;
        transform: translateY(-2px);
    }

    button.print-btn {
        background-color: #6c757d;
    }
    button.print-btn:hover {
        background-color: #5a6268;
    }

    .delete-btn {
        background-color: #dc3545;
        color: white;
        border: none;
        padding: 6px 12px;
        border-radius: 6px;
        cursor: pointer;
        font-size: 13px;
        transition: background-color 0.3s;
    }
    .delete-btn:hover {
        background-color: #c82333;
    }

    .no-print {
        display: table-cell;
    }
    
    /* === NEW: Hide logo from print === */
    @media print {
        body {
            background-color: #fff;
            padding: 0;
            margin: 0;
        }
        .container {
            box-shadow: none;
            border: 1px solid #ccc;
            margin: 0;
            max-width: 100%;
        }
        .btn-area, .no-print, .logo-img { /* Hide logo from print */
            display: none !important;
        }
        /* Make sure out-of-stock rows are NOT red when printing */
        tr.row-out-of-stock {
            background-color: #ffffff;
        }
    }
</style>
</head>
<body>

<div class="container">
    
    <img src="https://Zaw325.github.io/Checklist-/logo.png" alt="Company Logo" class="logo-img">
    
    <h1>Chemical Checklist</h1>
    <p id="checklist-date"></p>

    <table id="checklistTable">
        <thead>
            <tr>
                <th>Items</th>
                <th>Current</th>
                <th>Needed</th>
                <th>Remark</th>
                <th class="no-print">Actions</th>
            </tr>
        </thead>
        <tbody>
            </tbody>
    </table>

    <div class="btn-area">
        <button onclick="addRow()">+ Add Row</button>
        <button onclick="window.print()" class="print-btn">üñ®Ô∏è Print</button>
    </div>
</div>

<script>
    const STORAGE_KEY = 'chemicalChecklistData';

    document.addEventListener('DOMContentLoaded', () => {
        loadData();
        setDate();
    });

    function setDate() {
        const dateEl = document.getElementById('checklist-date');
        const today = new Date();
        const options = { year: 'numeric', month: 'long', day: 'numeric' };
        dateEl.textContent = 'Date: ' + today.toLocaleDateString('en-US', options);
    }

    function loadData() {
        const tableBody = document.getElementById("checklistTable").getElementsByTagName('tbody')[0];
        const dataString = localStorage.getItem(STORAGE_KEY);
        
        tableBody.innerHTML = '';

        if (dataString) {
            const data = JSON.parse(dataString);
            if (data.length > 0) {
                data.forEach(rowData => {
                    createRow(rowData);
                });
            } else {
                addRow(); 
            }
        } else {
            addRow(); 
        }
    }

    function saveData() {
        const tableBody = document.getElementById("checklistTable").getElementsByTagName('tbody')[0];
        const data = [];
        
        for (let row of tableBody.rows) {
            const rowData = {
                item: row.cells[0].querySelector('input').value,
                current: row.cells[1].querySelector('input').value,
                needed: row.cells[2].querySelector('input').value,
                remark: row.cells[3].querySelector('textarea').value
            };
            data.push(rowData);
        }
        
        localStorage.setItem(STORAGE_KEY, JSON.stringify(data));
    }

    // This function checks the remark text and applies styles
    function checkRemarkStyle(textarea) {
        const value = textarea.value.trim();
        textarea.classList.remove('remark-urgent', 'remark-note');
        
        if (value.startsWith('*') && value.endsWith('*')) {
            textarea.classList.add('remark-urgent');
        } else if (value.startsWith('#') && value.endsWith('#')) {
            textarea.classList.add('remark-note');
        }
    }
    
    // === NEW FUNCTION HERE ===
    // This function checks the stock level and applies row style
    function checkStockWarning(input) {
        const value = input.value.trim();
        const row = input.parentElement.parentElement; // Get the <tr>
        
        if (value === '0') {
            row.classList.add('row-out-of-stock');
        } else {
            row.classList.remove('row-out-of-stock');
        }
    }
    // === END OF NEW FUNCTION ===


    // === UPDATED createRow FUNCTION ===
    function createRow(rowData) {
        const tableBody = document.getElementById("checklistTable").getElementsByTagName('tbody')[0];
        const newRow = tableBody.insertRow();
        
        const cellItem = newRow.insertCell(0);
        const cellCurrent = newRow.insertCell(1);
        const cellNeeded = newRow.insertCell(2);
        const cellRemark = newRow.insertCell(3);
        const cellAction = newRow.insertCell(4);

        cellItem.innerHTML = `<input type="text" placeholder="e.g. Bleach" value="${rowData.item || ''}">`;
        
        // Create 'Current' cell and get reference
        cellCurrent.innerHTML = `<input type="text" placeholder="e.g. 2 bottles" value="${rowData.current || ''}">`;
        const currentInput = cellCurrent.querySelector('input');
        
        cellNeeded.innerHTML = `<input type="text" placeholder="e.g. 3 more" value="${rowData.needed || ''}">`;
        
        // Create 'Remark' cell and get reference
        cellRemark.innerHTML = `<textarea placeholder="Note...">${rowData.remark || ''}</textarea>`;
        const remarkTextarea = cellRemark.querySelector('textarea');

        cellAction.classList.add('no-print');
        cellAction.innerHTML = `<button class="delete-btn" onclick="deleteRow(this)">Delete</button>`;

        // Attach save function to all inputs
        newRow.querySelectorAll('input, textarea').forEach(input => {
            input.addEventListener('input', saveData);
        });

        // Attach the style checker to the remark textarea
        remarkTextarea.addEventListener('input', () => {
            checkRemarkStyle(remarkTextarea);
        });
        
        // === NEW: Attach stock checker to the 'current' input ===
        currentInput.addEventListener('input', () => {
            checkStockWarning(currentInput);
        });
        
        // Check styles immediately on page load
        checkRemarkStyle(remarkTextarea);
        checkStockWarning(currentInput); // Check stock on load
    }
    // === END OF UPDATED FUNCTION ===

    function addRow() {
        createRow({}); 
    }

    function deleteRow(button) {
        const row = button.parentElement.parentElement;
        if (confirm('Are you sure you want to delete this row?')) {
            row.parentElement.removeChild(row);
            saveData();
        }
    }

</script>

</body>
</html>
